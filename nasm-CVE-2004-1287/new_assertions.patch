--- preproc.c	2020-12-18 02:14:30.699687711 -0500
+++ preproc.c.new	2020-12-18 02:14:42.763963462 -0500
@@ -41,6 +41,7 @@
 #include <string.h>
 #include <ctype.h>
 #include <limits.h>
+#include <assert.h>
 
 #include "nasm.h"
 #include "nasmlib.h"
@@ -2208,6 +2209,7 @@
 	    else
 	    {
 		p = detoken(tline, FALSE);
+		assert(strlen(p) < 1024);
 		error(ERR_WARNING, "%s", p);
 		nasm_free(p);
 	    }
